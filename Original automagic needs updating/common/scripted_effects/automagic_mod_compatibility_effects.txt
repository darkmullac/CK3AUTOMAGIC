# ----------------------------
# More Buildings Reboot
# ----------------------------

aba_building_upgrade_effect_mbrxxx = { 
    # Economy
    if = {
        limit = { has_building_or_higher = militia_01 }
        aba_economy_building_upgrade_effect = { BUILDING = militia }
    }
    if = {
        limit = { has_building_or_higher = improvement_01 }
        aba_economy_building_upgrade_effect = { BUILDING = improvement }
    }
    if = {
        limit = { has_building_or_higher = town_01 }
        aba_economy_building_upgrade_effect = { BUILDING = town }
    }
    if = {
        limit = { has_building_or_higher = district_01 }
        aba_economy_building_upgrade_effect = { BUILDING = district }
    }
    if = {
        limit = { has_building_or_higher = hospital_01 }
        aba_economy_building_upgrade_effect = { BUILDING = hospital }
    }
    if = {
        limit = { has_building_or_higher = farming_01 }
        aba_economy_building_upgrade_effect = { BUILDING = farming }
    }
    # Military
    if = {
        limit = { has_building_or_higher = horse_01 }
        aba_military_building_upgrade_effect = { BUILDING = horse }
    }
    if = {
        limit = { has_building_or_higher = MBRXXX_horse_archer_01 }
        aba_military_building_upgrade_effect = { BUILDING = MBRXXX_horse_archer }
    }
    if = {
        limit = { has_building_or_higher = MBRXXX_camel_01 }
        aba_military_building_upgrade_effect = { BUILDING = MBRXXX_camel }
    }
    # Fortification
    if = {
        limit = { has_building_or_higher = expansion_01 }
        aba_fortification_building_upgrade_effect = { BUILDING = expansion }
    }
    if = {
        limit = { has_building_or_higher = expansion_camel_cavalry_01 }
        aba_fortification_building_upgrade_effect = { BUILDING = expansion_camel_cavalry }
    }
    if = {
        limit = { has_building_or_higher = expansion_archer_cavalry_01 }
        aba_fortification_building_upgrade_effect = { BUILDING = expansion_archer_cavalry }
    }
    if = {
        limit = { has_building_or_higher = interior_01 }
        aba_fortification_building_upgrade_effect = { BUILDING = interior }
    }
    if = {
        limit = { has_building_or_higher = support_01 }
        aba_fortification_building_upgrade_effect = { BUILDING = support }
    }
    # Tribal
    if = {
        limit = { has_building_or_higher = Townsquare_01 }
        aba_mbrxxx_tribal_building_upgrade_effect = { BUILDING = Townsquare }
    }
    if = {
        limit = { has_building_or_higher = tribeport_01 }
        aba_mbrxxx_tribal_building_upgrade_effect = { BUILDING = tribeport }
    }
    if = {
        limit = { has_building_or_higher = war_01 }
        aba_mbrxxx_tribal_building_upgrade_effect = { BUILDING = war }
    }
    if = {
        limit = { has_building_or_higher = raiding_01 }
        aba_mbrxxx_tribal_building_upgrade_effect = { BUILDING = raiding }
    }
    if = {
        limit = { has_building_or_higher = medicine_lodge_01 }
        aba_mbrxxx_tribal_building_upgrade_effect = { BUILDING = medicine_lodge }
    }
    if = {
        limit = { has_building_or_higher = liehu_01 }
        aba_mbrxxx_tribal_building_upgrade_effect = { BUILDING = liehu }
    }
    if = {
        limit = { has_building_or_higher = car_01 }
        aba_mbrxxx_tribal_building_upgrade_effect = { BUILDING = car }
    }
    if = {
        limit = { has_building_or_higher = pimao_01 }
        aba_mbrxxx_tribal_building_upgrade_effect = { BUILDING = pimao }
    }
    if = {
        limit = { has_building_or_higher = zhanshi_01 }
        aba_mbrxxx_tribal_building_upgrade_effect = { BUILDING = zhanshi }
    }
    # More Buildings ++
    if = {
        limit = { has_building_or_higher = slaughterhouse_01 }
        aba_economy_building_upgrade_effect = { BUILDING = slaughterhouse }
    }
    if = {
        limit = { has_building_or_higher = vineyard_01 }
        aba_economy_building_upgrade_effect = { BUILDING = vineyard }
    }
    if = {
        limit = { has_building_or_higher = tunnel_01 }
        aba_economy_building_upgrade_effect = { BUILDING = tunnel }
    }
    if = {
        limit = { has_building_or_higher = plain_01 }
        aba_economy_building_upgrade_effect = { BUILDING = plain }
    }
    if = {
        limit = { has_building_or_higher = czhen_01 }
        aba_economy_building_upgrade_effect = { BUILDING = czhen }
    }
    if = {
        limit = { has_building_or_higher = muhou_01 }
        aba_economy_building_upgrade_effect = { BUILDING = muhou }
    }
    if = {
        limit = { has_building_or_higher = silk_01 }
        aba_economy_building_upgrade_effect = { BUILDING = silk }
    }
    if = {
        limit = { has_building_or_higher = restau_01 }
        aba_economy_building_upgrade_effect = { BUILDING = restau }
    }
    if = {
        limit = { has_building_or_higher = supm_01 }
        aba_economy_building_upgrade_effect = { BUILDING = supm }
    }
    if = {
        limit = { has_building_or_higher = mif_01 }
        aba_economy_building_upgrade_effect = { BUILDING = mif }
    }
    if = {
        limit = { has_building_or_higher = lcamp_01 }
        aba_economy_building_upgrade_effect = { BUILDING = lcamp }
    }
    if = {
        limit = { has_building_or_higher = hbm_01 }
        aba_economy_building_upgrade_effect = { BUILDING = hbm }
    }
    if = {
        limit = { has_building_or_higher = tavern_01 }
        aba_economy_building_upgrade_effect = { BUILDING = tavern }
    }
    if = {
        limit = { has_building_or_higher = stash_01 }
        aba_economy_building_upgrade_effect = { BUILDING = stash }
    }
    if = {
        limit = { has_building_or_higher = spice_01 }
        aba_economy_building_upgrade_effect = { BUILDING = spice }
    }
    if = {
        limit = { has_building_or_higher = crockery_01 }
        aba_economy_building_upgrade_effect = { BUILDING = crockery }
    }
    if = {
        limit = { has_building_or_higher = currier_01 }
        aba_economy_building_upgrade_effect = { BUILDING = currier }
    }
    if = {
        limit = { has_building_or_higher = waterfront_01 }
        aba_economy_building_upgrade_effect = { BUILDING = waterfront }
    }
    if = {
        limit = { has_building_or_higher = shanqiu_01 }
        aba_economy_building_upgrade_effect = { BUILDING = shanqiu }
    }
    if = {
        limit = { has_building_or_higher = fayuan_01 }
        aba_economy_building_upgrade_effect = { BUILDING = fayuan }
    }
}

aba_mbrxxx_building_upgrade_effect = {
    # Generic wrapper used by the MBRXXX building chain.
    # Delegates to Automagic's helper effects so the passed BUILDING
    # value is upgraded regardless of its category.
    aba_economy_building_upgrade_effect = { BUILDING = BUILDING }
    aba_military_building_upgrade_effect = { BUILDING = BUILDING }
    aba_fortification_building_upgrade_effect = { BUILDING = BUILDING }
    aba_default_building_upgrade_effect = { BUILDING = BUILDING }
}

aba_mbrxxx_tribal_building_upgrade_effect = {
    # Wrapper for tribal structures added by the MBRXXX mod.
    aba_tribal_building_upgrade_effect = { BUILDING = BUILDING }
}

# ----------------------------
# Orient Empires
# ----------------------------

aba_building_upgrade_effect_oe = { 
    if = {
        limit = { has_building_or_higher = tea_plantation_01 }
        aba_oe_building_upgrade_effect = { BUILDING = tea_plantation }
    }
    if = {
        limit = { has_building_or_higher = sea_spice_plantation_01 }
        aba_oe_building_upgrade_effect = { BUILDING = sea_spice_plantation }
    }
    if = {
        limit = { has_building_or_higher = silk_plantation_01 }
        aba_oe_building_upgrade_effect = { BUILDING = silk_plantation }
    }
}
aba_oe_building_upgrade_effect = {
    # Upgrades Orient Empires buildings using Automagic's standard logic.
    aba_economy_building_upgrade_effect = { BUILDING = BUILDING }
    aba_fortification_building_upgrade_effect = { BUILDING = BUILDING }
    aba_default_building_upgrade_effect = { BUILDING = BUILDING }
}

# ----------------------------
# Orient Empires Expansion of cultural customs
# ----------------------------

aba_building_upgrade_effect_oeex = {
    if = {
        limit = { has_building_or_higher = qianmutian_01 }
        aba_oeex_building_upgrade_effect = { BUILDING = qianmutian }
    }
    # Add further blocks for additional OEEX buildings if needed
}
aba_oeex_building_upgrade_effect = {
    # Handles upgrades for the Orient Empires Expansion pack.
    aba_economy_building_upgrade_effect = { BUILDING = BUILDING }
    aba_fortification_building_upgrade_effect = { BUILDING = BUILDING }
    aba_default_building_upgrade_effect = { BUILDING = BUILDING }
}
aba_oeex_tribal_building_upgrade_effect = {
    # Applies tribal upgrade logic for OEEX specific chains.
    aba_tribal_building_upgrade_effect = { BUILDING = BUILDING }
}

# ----------------------------
# A Game of Thrones
# ----------------------------

aba_building_upgrade_effect_agot = { 
    # Economy
    if = {
        limit = { has_building_or_higher = agot_urban_farms_01 }
        aba_economy_building_upgrade_effect = { BUILDING = agot_urban_farms }
    }
    if = {
        limit = { has_building_or_higher = agot_steppe_farms_01 }
        aba_economy_building_upgrade_effect = { BUILDING = agot_steppe_farms }
    }
    if = {
        limit = { has_building_or_higher = apiaries_01 }
        aba_economy_building_upgrade_effect = { BUILDING = apiaries }
    }
    # Fortification
    if = {
        limit = { has_building_or_higher = building_moat_01 }
        aba_fortification_building_upgrade_effect = { BUILDING = building_moat }
    }
    # Other
    if = {
        limit = { has_building_or_higher = agot_slave_camps_01 }
        aba_default_building_upgrade_effect = { BUILDING = agot_slave_camps }
    }
    if = {
        limit = { has_building_or_higher = godswood_01 }
        aba_default_building_upgrade_effect = { BUILDING = godswood }
    }
}
